// import { CUSTOMIZED_SCHEMAS } from './custom-schemas';

import { CustomApiSchemas } from './custom-schemas';

// They need to match with any custom schema added to CustomApiSchemas keys
export const CUSTOMIZED_SCHEMAS: Array<keyof CustomApiSchemas> = ['Alert', 'AlertGroup'];

export const addCustomSchemasToAutogeneratedOutput = (
  originalOutput: string,
  customizedSchemas: string[] = CUSTOMIZED_SCHEMAS
) => {
  const REGEX = new RegExp(`\\s(${customizedSchemas.join('|')})\\s*:`, 'g');

  let newOutput = `
      import type { CustomApiSchemas } from './types-generator/custom-schemas';
  
      ${originalOutput}
    `;
  newOutput = newOutput.replace(REGEX, (match) =>
    match.concat(` CustomApiSchemas["${match.split(':')[0].trim()}"] & `)
  );

  return newOutput;
};
